// On définit l'état initial de nos variables d'animation au niveau du composant.
// GSAP va prendre le contrôle de ces variables pour créer l'animation.
:host {
  --mask-scale: 1;
  --mask-radius: 16px;
  --title-translate-y: 0px;
  --title-opacity: 1;
  --first-image-clip: 100%; // 100% = complètement caché (coupé par le bas)
  --second-image-clip: 100%; // 100% = complètement caché
}

// --- Styles généraux de la section ---
.yours-section {
  padding: 6rem 0;
  text-align: center;
}

.yours-title {
  font-size: clamp(2.5rem, 5vw, 4rem);
  font-weight: 800;
  color: var(--text-color-base);
  margin-bottom: 3rem;
  // On lie le transform et l'opacité aux variables CSS
  transform: translateY(var(--title-translate-y));
  opacity: var(--title-opacity);
}

// --- Styles pour la pilule animée "Personnalisez-le" ---
.pill-wrapper {
  display: inline-block;

  .pill {
    display: inline-flex;
    padding: 0.75rem 1.5rem;
    background-color: #fdd8d6; // Rouge clair
    border-radius: 99px;
    color: #ea4335; // Rouge Google
    overflow: hidden; // Important pour l'animation des lettres
  }

  .pill-char {
    display: inline-block;
    transform: translateY(110%); // Caché en bas au début
  }

  // Quand la classe .is-animated est ajoutée, on lance l'animation
  &.is-animated .pill-char {
    animation: charBounceSlideInUp 0.7s cubic-bezier(0.22, 0.9, 0.28, 1) forwards;
    animation-delay: var(--animation-delay, 0ms);
  }
}

// L'animation des lettres qui montent et rebondissent
@keyframes charBounceSlideInUp {
  0% {
    transform: translateY(110%);
  }
  50% {
    transform: translateY(-10%);
  }
  70% {
    transform: translateY(5%);
  }
  100% {
    transform: translateY(0%);
  }
}

// --- Styles pour l'animation "Take Over" ---
.take-over-container {
  // La hauteur de ce conteneur définit la "longueur" du scroll de l'animation.
  // 300vh = l'utilisateur devra scroller 3x la hauteur de l'écran pour la voir en entier.
  height: 300vh;
  position: relative;
  margin-top: 5rem;
}

.take-over-sticky-content {
  // Cet élément va se "coller" en haut de la page pendant que son parent défile.
  position: sticky;
  top: 0;
  height: 100vh; // Il prend toute la hauteur de l'écran.
  overflow: hidden;
  display: flex;
  justify-content: center;
  align-items: center;
}

.animation-wrapper {
  // Le scale est piloté par la variable CSS --mask-scale animée par GSAP.
  transform: scale(var(--mask-scale));
}

.animation-mask {
  position: relative;
  width: 60vw;
  max-width: 400px;
  aspect-ratio: 4 / 3;
  // Le border-radius est aussi piloté par une variable CSS animée par GSAP.
  border-radius: var(--mask-radius);
  overflow: hidden; // C'est ça qui fait l'effet de "masque" et qui cache ce qui dépasse.
}

.take-over-image {
  // Les 3 SVGs sont empilés les uns sur les autres.
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
}

// On utilise clip-path pour révéler les images du bas vers le haut.
// Ces variables sont pilotées par GSAP, passant de 100% (caché) à 0% (visible).
.first-capture {
  clip-path: inset(var(--first-image-clip) 0 0 0);
}

.second-capture {
  clip-path: inset(var(--second-image-clip) 0 0 0);
}
